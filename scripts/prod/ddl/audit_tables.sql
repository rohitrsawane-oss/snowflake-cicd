USE DATABASE {DATABASE_NAME};
--audit layer tables
create or replace TABLE SCH_TRUSTCAB_AUDIT.AZURE_TABLE_METADATA (
	SOURCE_TYPE VARCHAR(16777216),
	SOURCE_DB VARCHAR(16777216),
	SOURCE_SCHEMA VARCHAR(16777216),
	SOURCE_TABLE VARCHAR(16777216),
	TARGET_DB VARCHAR(16777216),
	TARGET_SCHEMA VARCHAR(16777216),
	TARGET_TABLE VARCHAR(16777216),
	IS_ACTIVE BOOLEAN,
	CURRENT_USERNAME VARCHAR(16777216),
	LAST_UPDATED_TIMESTAMP TIMESTAMP_LTZ(9),
	ERROR_CODE VARCHAR(16777216),
	STATUS VARCHAR(16777216)
);

create or replace TABLE SCH_TRUSTCAB_AUDIT.FILE_LOAD_METADATA (
	METADATA_ID NUMBER(38,0) autoincrement start 1 increment 1 noorder,
	BRONZE_TABLE_NAME VARCHAR(255),
	STAGE_NAME VARCHAR(255),
	AZURE_FILE_PATH VARCHAR(255),
	ARCHIVE_FILE_PATH VARCHAR(255),
	COMPLETE_ARCHIVE_FILE_PATH VARCHAR(255),
	FILE_PATTERN VARCHAR(255),
	FILE_FORMAT_TYPE VARCHAR(255),
	IS_ACTIVE VARCHAR(255),
	CREATED_BY VARCHAR(16777216) NOT NULL DEFAULT CURRENT_USER(),
	CREATED_AT TIMESTAMP_NTZ(9) NOT NULL DEFAULT CURRENT_TIMESTAMP(),
	UPDATED_BY VARCHAR(16777216) NOT NULL DEFAULT CURRENT_USER(),
	UPDATED_AT TIMESTAMP_NTZ(9) NOT NULL DEFAULT CURRENT_TIMESTAMP()
);

create or replace TABLE SCH_TRUSTCAB_AUDIT.TRANSPORTATION_PROCESS_LOG (
	TARGET_SCHEMA_NAME VARCHAR(16777216),
	FILE_NAME VARCHAR(16777216),
	TARGET_TABLE_NAME VARCHAR(16777216),
	LAST_LOAD_TIME TIMESTAMP_NTZ(9),
	STATUS VARCHAR(16777216),
	ROW_COUNT NUMBER(38,0),
	ROW_PARSED NUMBER(38,0),
	FIRST_ERROR_MESSAGE VARCHAR(16777216),
	FIRST_ERROR_LINE_NUMBER NUMBER(38,0),
	FIRST_ERROR_COL_NAME VARCHAR(16777216),
	ERROR_COUNT NUMBER(38,0),
	CREATED_BY VARCHAR(16777216) NOT NULL DEFAULT CURRENT_USER()
);